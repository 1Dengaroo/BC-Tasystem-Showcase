{% extends 'base.html' %}
{% block content %} 

<h2>{{ course }} details</h2>

<table class="table table-striped table-bordered table-hover">
  <thead>
    <tr>
      <th>Course Title</th>
      <th>Professor</th>
      <th>Class Type</th>
      <th>Course Number</th>
      <th>Section</th>
      <th>Location</th>
      <th>Timeslot</th>
      <th>TAs</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody class="table-hover">
      <tr>
        <td>{{ course.course_title }}</td>
        <td>{{ course.instructor_first_name}} {{ course.instructor_last_name}}</td>
        <td>{{ course.class_type }}</td>
        <td>{{ course.course }}</td>
        <td>{{ course.section }}</td>
        <td>{{ course.room_name }}</td>
        <td>{{ course.timeslot }}</td>
        <td>{{ course.current_tas.count }}/{{ course.num_tas }}</td>
        {% if course.status == True%}
          {% if user.is_staff or user.professor %}
            <td><strong style="color: green"> Open </strong></td>
          {% else %}
            <td><a href="{% url 'applications:application-create' course.id %}">Apply</a></td>
          {% endif %}
        {% else %}
          <td><strong style="color: red"> Closed </strong></td>
        {% endif %} 
      </tr>     
  </tbody>
</table>

{% if user == course.professor or user.is_superuser %}
    <h2>Current TAs</h2>
    {% for ta in course.current_tas.all %}
    <p>{{ ta }}</p>
    {% endfor %}
    <br/>
    <h2>Applications</h2>
    {% for application in course.applications.all %}
    <p>{{ application.student }}
        <a href="{% url 'applications:application-detail' application.id %}">- View Application</a>
    </p>
    {% endfor %}
{% endif %}



{% endblock %}
